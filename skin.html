<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[##_title_##]</title>
    <link rel="alternate" type="application/rss+xml" title="[##_title_##]" href="[##_rss_url_##]">
    <script src="https://kit.fontawesome.com/ec4be74063.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./style.css">
    <script
    src="https://code.jquery.com/jquery-3.7.0.slim.min.js"
    integrity="sha256-tG5mcZUtJsZvyKAxYLVXrmjKBVLd6VpVccqz/r4ypFE="
    crossorigin="anonymous"></script>
    
</head>

<body id="[##_body_id_##]" onscroll="getScrollPosition(this.scrollY);">
    <s_t3>
        <div id="container">
            <main id="main">
                <s_cover_group>
                    <s_cover_rep>
                        <s_cover name="front_door">
                            <s_cover_item>
                                <s_cover_item_article_info>[##_cover_item_title_##]</s_cover_item_article_info>
                                <s_cover_item_not_article_info>[##_cover_item_summary_##]</s_cover_item_not_article_info>
                            </s_cover_item>
                        </s_cover>
                    </s_cover_rep>
                </s_cover_group>

                <div class="main_inside_padding">
                    <s_article_rep>
                        <s_permalink_article_rep>
                            <header>
                                <div id="header_container" style="width: 100%; padding-top: calc(1.5*(var(--hamburger-button-size) + 2 * var(--logo-margin-top)));">
                                    <div id='article_category' class="text_center" name=[##_article_rep_category_##]>[##_article_rep_category_##]</div>
                                    <div class="text_center"><h1>[##_article_rep_title_##]</h1></div>
                                    <div class="text_center">[##_article_rep_date_##]</div>
                                    <s_ad_div>
                                        <div style="text-align: center;">
                                            <a href="[##_s_ad_m_link_##]">수정</a>|
                                            <a href="#" onclick="[##_s_ad_d_onclick_##]">삭제</a>|
                                            <a href="#" onclick="[##_s_ad_s2_onclick_##]">[##_s_ad_s1_label_##]</a>
                                        </div>
                                    </s_ad_div>
                                </div>
                            </header>

                            <article>
                                <div id="article_content">
                                    <div id='article_index_container'>
                                        <div id='article_index_container_caption'>글 목차</div>
                                    </div>
                                    [##_article_rep_desc_##]
                                </div>

                                <script>
                                    let article_all_tag = article_content.querySelectorAll('div.tt_article_useless_p_margin.contents_style *');
                                    let h_mapper = {};
                                    let h_stack_size = [1];
                                    let h_stack_index = [-1];
                                    for (let i in article_all_tag) {
                                        if (article_all_tag[i].tagName != 'H4' && article_all_tag[i].tagName != 'H3' && article_all_tag[i].tagName != 'H2') continue;
                                        article_all_tag[i].id = i;
                                        let present_h_size = article_all_tag[i].tagName[1];
                                        let temp_h_array = [];
                                        while (present_h_size < h_stack_size[h_stack_size.size() - 1]) {
                                            temp_h_array.push(h_stack_index.pop());
                                            let temp_top = h_stack_size.pop();
                                            if (temp_top > h_stack_size[h_stack_size.size() - 1]) {
                                                h_mapper[h_stack_index[h_stack_index.size()-1]] = temp_h_array;
                                                temp_h_array = new Array();
                                            }
                                        }
                                        
                                        h_stack_index.push(i);
                                        h_stack_size.push(present_h_size);
                                    }
                                    let present_h_size = 1;
                                        
                                    let temp_h_array = [];
                                    while (present_h_size < h_stack_size[h_stack_size.size() - 1]) {
                                        temp_h_array.push(h_stack_index.pop());
                                        let temp_top = h_stack_size.pop();
                                        if (temp_top > h_stack_size[h_stack_size.size() - 1]) {
                                            h_mapper[h_stack_index[h_stack_index.size()-1]] = temp_h_array;
                                            temp_h_array = new Array();
                                        }
                                    }

                                    for (let k of Object.keys(h_mapper)) {
                                        h_mapper[k] = h_mapper[k].reverse();
                                    }

                                    let p_ul = document.createElement('div');
                                    p_ul.id = 'article_index_container_inside';
                                    article_index_container.appendChild(p_ul);

                                    let dfsing = (node) => {
                                        for (let i of h_mapper[node]) {
                                            let new_ul = document.createElement('ul');
                                            let new_li = document.createElement('li');
                                            let new_a = document.createElement('a');
                                            new_a.href = '#' + i;
                                            new_a.textContent = article_all_tag[i].textContent;
                                            new_li.appendChild(new_a);
                                            new_ul.appendChild(new_li);
                                            p_ul.appendChild(new_ul);
                                            let temp = p_ul;
                                            p_ul = new_ul;
                                            if (h_mapper[i]) {
                                                dfsing(i);
                                            }
                                            p_ul = temp;
                                        }
                                    }

                                    dfsing(-1);

                                </script>

                                <s_tag_label>
                                    <div class="tagTrail">
                                        <span class="tagText">TAG </span> [##_tag_label_rep_##]
                                    </div>
                                </s_tag_label>
                            </article>
                            <footer>
                                <s_article_related>
                                    <s_article_related_rep>
                                        <div>관련:[##_article_related_rep_title_##]</div> 
                                    </s_article_related_rep>
                                </s_article_related>
                                <!--레이지로드 검색-->
                                <div style="background-image: url([##_image_##]); background-size: cover; background-repeat: no-repeat; background-position: center; width:50px; height: 50px; border-radius: 25px;"></div>
                                <div>작성자:[##_blogger_##]</div>
                                <div>작성자설명:[##_desc_##]</div>
                            </footer>
                            <s_rp>
                                [##_comment_group_##]
                            </s_rp>
                        </s_permalink_article_rep>

                        <s_article_protected>
                            <div class="entryProtected">
                                <h2><a href="[##_article_rep_link_##]">[##_article_rep_title_##]</a></h2>
                                <span class="date">[##_article_rep_date_##]</span>
                                <p>보호되어 있는 글입니다. 내용을 보시려면 비밀번호를 입력하세요.</p>
                                <p>
                                <label for="[##_article_password_##]">비밀번호 ::</label>
                                <input type="password" maxlength="16" id="[##_article_password_##]" name="[##_article_password_##]" value="" onkeydown="if (event.keyCode == 13)[##_article_dissolve_##]" />
                                <input type="button" class="submit" value="submit" onclick="[##_article_dissolve_##]" />
                                </p>
                            </div>
                        </s_article_protected>
                    </s_article_rep>

                    <!-- 공지사항 페이지 -->
                    <s_notice_rep>
                        <s_index_article_rep>
                            [##_article_rep_link_##]
                            <div>제목:[##_notice_rep_title_##]</div>
                            <div>내용:[##_notice_rep_summary_##]</div>
                            <br>
                        </s_index_article_rep>
                        <s_permalink_article_rep>
                            <header>
                                <div>제목:[##_notice_rep_title_##]</div>
                                <div>날짜:[##_notice_rep_date_##]</div>
                            </header>
                            <article>
                                내용:[##_notice_rep_desc_##]
                            </article>
                        </s_permalink_article_rep>
                    </s_notice_rep>

                    <!-- 페이지 글 -->
                    <s_page_rep>
                        <div>
                            <h2><a href="[##_article_rep_link_##]">[##_article_rep_title_##]</a></h2>
                            <div>
                            [##_article_rep_desc_##]
                            </div>
                        </div>
                    </s_page_rep>

                    <!-- 태그 클라우드 페이지 /tag -->
                    <s_tag>
                        <div class="taglog">
                            <h3>태그</h3>
                            <ul>
                                <s_tag_rep>
                                <li>
                                    <a href="[##_tag_link_##]" class="[##_tag_class_##]">[##_tag_name_##]</a>
                                </li>
                                </s_tag_rep>
                            </ul>
                        </div>
                    </s_tag>

                    <!-- 검색 결과 페이지 /search -->
                    <s_list>
                        <div class="searchList [##_list_style_##]">
                            <div <s_list_image>style="background-image:url('[##_list_image_##]')"</s_list_image>>
                            <h3>'[##_list_conform_##]'에 해당되는 글 [##_list_count_##]건</h3>
                            <p>[##_list_description_##]!!!!@@@</p>
                            </div>
                            <ol>
                            <s_list_rep>
                                <li>
                                <span class="date">[##_list_rep_regdate_##]</span>
                                <a href="[##_list_rep_link_##]">[##_list_rep_title_##]</a>
                                <span class="cnt">[##_list_rep_rp_cnt_##]</span>
                                <s_list_rep_thumbnail>
                                    <img src="[##_list_rep_thumbnail_##]">
                                </s_list_rep_thumbnail>
                                </li>
                            </s_list_rep>
                            </ol>
                        </div>
                    </s_list>
                    <s_paging>
                        <div class="paging">
                            <a [##_prev_page_##] class="[##_no_more_prev_##]">◀ PREV </a>
                            <span class="numbox">
                            <s_paging_rep>
                                <a [##_paging_rep_link_##] class="num">[[##_paging_rep_link_num_##]]</a>
                            </s_paging_rep>
                            </span>
                            <a [##_next_page_##] class="[##_no_more_next_##]">NEXT ▶</a>
                        </div>
                    </s_paging>
                </div>

                <header_bar id="header_bar">
                    <div id="page_title_container" style="margin: 0 auto;">
                        <div id="page_title_category" style="font-size: x-small; text-align: center; while-space: nowrap;">
                        </div>
                        <div id="page_title" style="overflow: hidden;">
                            <div id="page_title_text" style="font-weight: bold; white-space: nowrap; text-align: center;">
                                [##_page_title_##]
                            </div>
                            
                            <span id="page_title_text_copy" style="font-weight: bold; background: blue; white-space: nowrap; text-align: center; position:absolute; visibility:hidden">
                                [##_page_title_##]
                            </span>
                        </div>
                    </div>
                </header_bar>
                <script>
                    var getScrollPosition = (e) => {
                        if (e == 0) header_bar.style.top = 'calc(-1*(var(--hamburger-button-size) + 2 * var(--logo-margin-top)))';
                        else {
                            header_bar.style.top = 0;
                        }
                    }
                    if (document.body.id == 'tt-body-page') {
                        page_title_category.style.display = 'block';
                        page_title_category.innerText = article_category.getAttribute('name');
                    }
                </script>
            </main>
            <div id="difense_div"></div>
            <aside class="nav_bar">
                <div id="nav_bar_inside_region">
                    <div id="nav_bar_inside">
                        <s_sidebar>
                            <!--
                            <s_sidebar_element>--><!-- 방문자 수--><!--
                            전체:[##_count_total_##]
                            오늘:[##_count_today_##]
                            어제:[##_count_yesterday_##]
                            </s_sidebar_element>
                            -->
                            <!-- 프로필에서 블로그 메뉴 분리 후 여기다 놓고 프로필에는 설명이나 링크 같은거 달아두자자 -->
                            <s_sidebar_element><!--프로필-->
                                <div id="profile_container">
                                    <div class="nav_content">
                                        <div style="background-image: url([##_image_##]); background-size: cover; background-repeat: no-repeat; background-position: center; height: calc(var(--nav-width) / 10 * 7); width: calc(var(--nav-width) / 10 * 7); margin: 0 auto; border: white 10px solid; box-shadow: 0 10px 10px 0px rgba(0,0,0,0.2);"></div>
                                        <!--<div id="admin_container">
                                          <a href="https://okane-on-cliff.tistory.com/manage/post"><i class="fa-solid fa-square-pen"></i>글쓰기</a>
                                        </div>
                                        <script>
                                            if (window.T.config.ROLE == 'owner') admin_container.style.display = 'block';
                                        </script>-->

                                        <div id="blog_menu" style="margin-top: 40px;">
                                            <!--
                                            <div>
                                                안녕하세요요
                                            </div>
                                            -->
                                            <div style="display: flex; justify-content: space-evenly; align-items: center; width: 100%; height: 50px; border-radius: 25px; background: white; margin: 0 auto; box-shadow: 0 5px 5px 0px rgba(0,0,0,0.2);">
                                                <!--<img width="30" height="30" src="./images/github_icon.svg">-->
                                                <div class="blog_menu_button_container">
                                                    <img src="https://img.icons8.com/external-kiranshastry-gradient-kiranshastry/64/external-home-multimedia-kiranshastry-gradient-kiranshastry.png" alt="external-home-multimedia-kiranshastry-gradient-kiranshastry"/>
                                                    <div>공지</div>
                                                </div>
                                                <div class="blog_menu_button_container">
                                                    <img src="https://img.icons8.com/external-icongeek26-outline-gradient-icongeek26/64/external-note-documents-icongeek26-outline-gradient-icongeek26.png" alt="external-note-documents-icongeek26-outline-gradient-icongeek26"/>
                                                    <div>방명록</div>
                                                </div>
                                                <div class="blog_menu_button_container">
                                                    <img src="https://img.icons8.com/external-kiranshastry-gradient-kiranshastry/64/external-search-logistic-delivery-kiranshastry-gradient-kiranshastry.png" alt="external-search-logistic-delivery-kiranshastry-gradient-kiranshastry"/>
                                                    <div>검색</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="hr_div"></div>
                            </s_sidebar_element>

                            <!--
                            <s_sidebar_element>--><!--검색--><!--
                                <div id="search_container">
                                    <div class="nav_content">
                                        <s_search>
                                            <div><input id="search" name="[##_search_name_##]" value="[##_search_text_##]" onkeypress="if (event.keyCode == 13) { [##_search_onclick_submit_##] }"><button>검색</button></div>
                                        </s_search>
                                    </div>
                                </div>
                            </s_sidebar_element>-->
                            
                            <s_sidebar_element><!--카테고리-->
                                <div id="category_container">
                                    <div class="nav_content">
                                        [##_category_list_##]
                                        <script>
                                            var category_title = document.querySelector("#category_container .link_tit");
                                                category_title.innerHTML = category_title.innerHTML.replace("분류 전체보기", "카테고리");

                                            for (let el of document.querySelector('#category_container .category_list').children) {
                                                if (el.innerText[0] == '*') {
                                                    let ih = el.innerHTML;
                                                    let index = ih.indexOf('*');
                                                    index = ih.indexOf('*', index+1);
                                                    el.innerHTML = ih.substring(0, index) + ih.substring(index + 1);
                                                    // console.log(el.innerHTML);
                                                    const ulElement = document.createElement('ul');
                                                    ulElement.classList.add('middle_category_list');
                                                    let article_count = 0;
                                                    while (el.nextElementSibling && el.nextElementSibling.innerText[0] != '*') {
                                                        article_count += Number(el.nextElementSibling.querySelector(".c_cnt").innerText.slice(1, -1));
                                                        ulElement.appendChild(el.nextElementSibling);
                                                    }
                                                    el.appendChild(ulElement);
                                                    el.querySelector(".c_cnt").innerText = "(" + article_count + ")";
                                                }
                                            }

                                            const categoryCount = document.querySelectorAll('#category_container .tt_category .c_cnt');
                                            for (let c of categoryCount) {
                                                c.textContent = c.textContent.slice(1, -1);
                                            }

                                            for (let el of document.querySelectorAll('.tt_category > li > ul a')) {
                                                if(el.parentElement.querySelector('ul')/* || el.querySelector('.c_cnt').textContent == '0'*/) {
                                                    el.removeAttribute("href");

                                                    let arrow_box = document.createElement('span');
                                                    arrow_box.innerHTML = '<i class=\"fas fa-angle-right\"></i>'
                                                    el.appendChild(arrow_box);

                                                    let ul_box = document.createElement('div');
                                                    ul_box.classList.add('ul_box');
                                                    ul_box.classList.add('height_zero');
                                                    ul_box.appendChild(el.nextElementSibling);
                                                    el.parentElement.appendChild(ul_box);

                                                    el.onclick = () => {
                                                        if (ul_box.classList.contains('height_zero')) {
                                                            ul_box.classList.remove('height_zero');
                                                        } else {
                                                            ul_box.classList.add('height_zero');
                                                        }
                                                    }
                                                }
                                            }
                                        </script>
                                    </div>
                                </div>
                            </s_sidebar_element>
                        </s_sidebar>
                    </div>
                </div>
            </aside>
        </div>
        <div id="logo_container" style="display: flex; align-items: center">
            <div id="hamburger_button" onclick="hamburger_button_click();">
                <div id="hamburger_button_line_container">
                    <div class="hamburger_button_line"></div>
                    <div class="hamburger_button_line"></div>
                    <div class="hamburger_button_line"></div>
                </div>
            </div>
            <div id="logo" onClick="location.href ='https://okane-on-cliff.tistory.com/'">
                <div id="logo_main">
                    블로그
                </div>
            </div>
        </div>
        <div id="search_icon_container">
            <img src="./images/search_icon.svg" style="height: calc(var(--hamburger-button-size) * 0.6);">
        </div>
        <script>
            var nav_bar = document.querySelector('.nav_bar');
            var width_standard = 1300;
            var logo_show_width = 900;
            var absolute_nav_standard = 650;

            var set_page_title_width_long = () => {
                page_title_container.style.width = 'calc(100% - 2 * var(--hamburger-button-size) - 4 * var(--logo-margin-top))';
            }
            var set_page_title_width_short = () => {
                page_title_container.style.width = 'calc(100% - 2 * var(--hamburger-button-size) - 6 * var(--logo-margin-top) - 2 * var(--main-logo-width))';
            }

            if (window.innerWidth <= width_standard) {
                nav_bar.style.left = 'calc(var(--nav-width) * -1)';
                main.style.width = '100%';
                main.style.left = '0';
            }
            else {
                nav_bar.style.left = '0';
                main.style.width = 'calc(100% - var(--nav-width))';
                main.style.left = 'var(--nav-width)';
            }
            if (window.innerWidth > logo_show_width) {
                set_page_title_width_short();
            } else {
                logo.style.display = 'none';
                set_page_title_width_long();
            }

            var set_page_title_scroll = () => {
                if(page_title_text_copy.getBoundingClientRect().width > page_title.getBoundingClientRect().width) {
                    document.documentElement.style.setProperty('--text-size', '-' + page_title_text_copy.getBoundingClientRect().width + 'px');
                    page_title_text.style.animation = 'marquee-animation ' + parseInt(page_title_text_copy.getBoundingClientRect().width / 40) + 's linear infinite';
                } else {
                    page_title_text.style.animation = '';
                }
            }
            set_page_title_scroll();

            var past_window_width = window.innerWidth;
            window.onresize = (e) => {
                if (past_window_width == window.innerWidth) {
                    return;
                }
                difense_div.style.display = 'none';
                past_window_width = window.innerWidth
                if (window.innerWidth <= width_standard) {
                    nav_bar.style.left = 'calc(var(--nav-width) * -1)';
                    main.style.width = '100%';
                    main.style.left = '0';
                } else {
                    nav_bar.style.left = '0';
                    main.style.width = 'calc(100% - var(--nav-width))';
                    main.style.left = 'var(--nav-width)';
                }
                if (nav_bar.style.left == '0px' || window.innerWidth > logo_show_width) {
                    logo.style.display = 'block';
                    set_page_title_width_short();
                } else {
                    logo.style.display = 'none';
                    set_page_title_width_long();
                }
                set_page_title_scroll();
            }
        </script>
    </s_t3>
</body>

<script>
    // console.log(document.body.id);
    var header_bar = document.querySelector('#header_bar');

    var hamburger_button_click = () => {
        if (nav_bar.style.left == '0px') {
            nav_bar.style.left = 'calc(var(--nav-width) * -1)';
            main.style.width = '100%';
            main.style.left = '0';
            main.style.filter = 'none'
            difense_div.style.display = 'none';
        } else {
            nav_bar.style.left = '0';
            if (window.innerWidth <= absolute_nav_standard) {
                main.style.width = '100%';
                main.style.left = '0';
                difense_div.style.display = 'block';
                difense_div.onclick = () => {
                    hamburger_button_click();
                }
                /*
                main.style.filter = 'blur(5px)'
                main.onclick = () => {
                    hamburger_button_click();
                }
                */
            } else {
                main.style.width = 'calc(100% - var(--nav-width))';
                main.style.left = 'var(--nav-width)';
            }
        }
        if (window.innerWidth <= logo_show_width && nav_bar.style.left != '0px') {
            logo.style.display = 'none';            
        } else {
            logo.style.display = 'block';
        }
        if (nav_bar.style.left == '0px' || logo.style.display == 'none') {
            set_page_title_width_long();
        } else {
            set_page_title_width_short();
        }
        setTimeout(set_page_title_scroll, '100');
    }
</script>



</html>